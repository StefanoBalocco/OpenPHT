#!/usr/bin/make -f
#export DH_VERBOSE=1
export DH_OPTIONS
DPKG_EXPORT_BUILDFLAGS=1
export DEB_BUILD_MAINT_OPTIONS=hardening=-format
include /usr/share/dpkg/buildflags.mk

DEB_HOST_GNU_TYPE   ?= $(shell dpkg-architecture -qDEB_HOST_GNU_TYPE)
DEB_BUILD_GNU_TYPE  ?= $(shell dpkg-architecture -qDEB_BUILD_GNU_TYPE)
DEB_HOST_ARCH ?= $(shell dpkg-architecture -qDEB_HOST_ARCH)

%:
	dh $@ --parallel --buildsystem=cmake

override_dh_auto_configure:
	dh_auto_configure -- \
		-DCMAKE_BUILD_TYPE=Release \
		-DCREATE_BUNDLE=off \
		-DENABLE_DUMP_SYMBOLS=off \
		-DENABLE_DVD_DRIVE=off \
		-DUSE_RAPIDXML=on \
		-DUSE_INTERNAL_FFMPEG=on \
		-DCOMPRESS_TEXTURES=on \
		-DENABLE_AUTOUPDATE=off \
                -DOpenGL_GL_PREFERENCE=GLVND

override_dh_auto_install:
	dh_auto_install --destdir=debian/tmp

override_dh_shlibdeps:
	dh_shlibdeps -l/usr/lib/openpht/system/players/dvdplayer
